<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chatbot</title>
    <link rel="icon" href="favicon.png" type="image/png" />
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
        background: linear-gradient(to right, #4da4d8, #bee7e1);
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
      }

      .chat-container {
        width: 90vw;
        max-width: 400px;
        background-color: #f9fafb;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
        gap: 12px;
        animation: slideIn 0.6s ease-out;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .message {
        display: flex;
        align-items: flex-end;
        gap: 10px;
      }

      .message.user {
        flex-direction: row-reverse;
      }

      .bubble {
        padding: 10px 15px;
        border-radius: 20px;
        max-width: 70%;
        font-size: 14px;
        word-wrap: break-word;
      }

      .chatbot .bubble {
        background-color: #8d80c9;
        color: white;
      }

      .user .bubble {
        background-color: #4da4d8;
        color: white;
      }

      .chat-input {
        display: flex;
        gap: 10px;
      }

      input {
        flex: 1;
        padding: 10px;
        border-radius: 20px;
        border: 1px solid #ccc;
        outline: none;
      }

      button {
        padding: 10px 20px;
        border-radius: 20px;
        background-color: #4da4d8;
        color: white;
        border: none;
        cursor: pointer;
      }

      img {
        width: 32px;
        height: 32px;
        border-radius: 50%;
      }

      .typing span {
        font-size: 14px;
        padding: 0 2px;
        animation: blink 1.5s infinite;
      }

      .bubble.typing {
        background-color: #8d80c9;
        color: #fff;
        display: flex;
        align-items: center;
        gap: 4px;
        border-radius: 20px;
        padding: 10px 15px;
        font-size: 14px;
      }

      .typing span:nth-child(2) {
        animation-delay: 0.2s;
      }

      .typing span:nth-child(3) {
        animation-delay: 0.4s;
      }

      @keyframes blink {
        0% { opacity: 0; }
        50% { opacity: 1; }
        100% { opacity: 0; }
      }
    </style>
  </head>
  <body>
    <div class="chat-container" id="chat"></div>

    <script src="https://unpkg.com/supersimpledev/react.js"></script>
    <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>
    <script src="https://unpkg.com/supersimpledev/babel.js"></script>
    <script src="https://unpkg.com/supersimpledev/dayjs.js"></script>

    <script type="text/babel">
      function ChatInput({ onSend }) {
        const [inputValue, setInputValue] = React.useState('');

        function handleSend() {
          if (inputValue.trim() !== '') {
            onSend(inputValue);
            setInputValue('');
          }
        }

        return (
          <div className="chat-input">
            <input
              placeholder="Send a message to Chatbot"
              value={inputValue}
              onChange={(e) => setInputValue(e.target.value)}
              onKeyDown={(e) => e.key === 'Enter' && handleSend()}
            />
            <button onClick={handleSend}>Send</button>
          </div>
        );
      }

      function ChatMessage({ message, sender }) {
        const isTyping = message === '__typing__';
        return (
          <div className={`message ${sender}`}>
            {sender === 'chatbot' && <img src="chatbot.png" />}
            {isTyping ? (
              <div className="bubble typing">
                <span>.</span><span>.</span><span>.</span>
              </div>
            ) : (
              <div className="bubble" dangerouslySetInnerHTML={{ __html: message }} />
            )}
            {sender === 'user' && <img src="user.png" />}
          </div>
        );
      }

      function App() {
        const [messages, setMessages] = React.useState([
          { message: "Hello! I'm your assistant.", sender: "chatbot" }
        ]);

        function handleSend(userMessage) {
          const updated = [...messages, { message: userMessage, sender: 'user' }];
          setMessages([...updated, { message: '__typing__', sender: 'chatbot' }]);

          setTimeout(() => {
            const lower = userMessage.toLowerCase();
            let reply = "I'm not sure how to respond.";

            if (lower.includes("hi") || lower.includes("hello")) {
              reply = "Hi there!";
            } else if (lower.includes("how are you")) {
              reply = "I'm doing well, thank you!";
            } else if (lower.includes("name")) {
              reply = "I'm your chatbot assistant.";
            } else if (lower.includes("date")) {
              reply = "Today's date is " + dayjs().format('MMMM D, YYYY');
            } else if (lower.includes("time")) {
              reply = "Current time is " + dayjs().format('HH:mm');
            } else if (lower.includes("joke")) {
              reply = "Why did the math book look sad? Because it had too many problems!";
            } else if (lower.includes("weather")) {
              reply = "It's really hot today, must be sunny out there.";
            } else if (lower.includes("goodbye") || lower.includes("bye")) {
              reply = "Goodbye, see you soon!";
            } else if (lower.includes("purpose")) {
              reply = "To help you and answer your questions ðŸ’¡";
            } else if (lower.includes("google")) {
              reply = 'Sure!<br/><a href="https://google.com" target="_blank" style="color:#0084ff; text-decoration:underline;">Click here to open Google</a>';
            }

            setMessages([...updated, { message: reply, sender: 'chatbot' }]);
          }, 1000);
        }

        return (
          <>
            {messages.map((msg, i) => (
              <ChatMessage key={i} message={msg.message} sender={msg.sender} />
            ))}
            <ChatInput onSend={handleSend} />
          </>
        );
      }

      const container = document.getElementById('chat');
      ReactDOM.createRoot(container).render(<App />);
    </script>
  </body>
</html>
